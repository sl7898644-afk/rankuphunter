<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hunter System | Professional Login</title>

<!-- Google Font -->
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600&display=swap" rel="stylesheet">

<style>
:root{
  --neon:#00e5ff;
  --dark:#05080f;
  --glass:rgba(255,255,255,0.08);
  --accent-red: #ff4757;
  --accent-green: #2ed573;
}

*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:'Orbitron',sans-serif;
}

body{
  min-height:100vh;
  background:
    radial-gradient(circle at top,#0a1a2f,#000),
    url('https://i.imgur.com/8Q1QZ4Y.png');
  display:flex;
  justify-content:center;
  align-items:center;
  color:white;
  overflow: auto;
}

/* Main Card */
.auth-container{
  width:420px;
  background:var(--glass);
  backdrop-filter:blur(15px);
  border-radius:16px;
  padding:40px;
  box-shadow:0 0 40px #00e5ff55, 0 0 60px rgba(0,229,255,0.2);
  animation:slideIn 0.6s ease;
  margin: 20px;
}

@keyframes slideIn{
  from{
    opacity:0;
    transform:translateY(-30px);
  }
  to{
    opacity:1;
    transform:translateY(0);
  }
}

/* Header */
.auth-header{
  text-align:center;
  margin-bottom:35px;
}

.auth-title{
  font-size:28px;
  font-weight:600;
  color:var(--neon);
  text-shadow:0 0 10px #00e5ff;
  margin-bottom:8px;
  letter-spacing:2px;
}

.auth-subtitle{
  font-size:13px;
  color:#aaa;
  opacity:0.8;
}

/* Form Group */
.form-group{
  margin-bottom:18px;
}

.form-label{
  display:block;
  font-size:12px;
  color:var(--neon);
  margin-bottom:6px;
  text-transform:uppercase;
  letter-spacing:1px;
}

.input-wrapper{
  position:relative;
}

input{
  width:100%;
  padding:14px 16px;
  border:2px solid rgba(0,229,255,0.3);
  outline:none;
  background:#050a15;
  color:white;
  border-radius:8px;
  box-shadow:inset 0 0 15px rgba(0,229,255,0.1);
  transition:all 0.3s ease;
  font-size:14px;
}

input:focus{
  border-color:var(--neon);
  box-shadow:
    inset 0 0 15px rgba(0,229,255,0.1),
    0 0 15px rgba(0,229,255,0.4);
  background:#0a0f1a;
}

input.error{
  border-color:var(--accent-red);
  box-shadow:
    inset 0 0 15px rgba(255,71,87,0.1),
    0 0 15px rgba(255,71,87,0.2);
}

/* Password Toggle */
.password-toggle{
  position:absolute;
  right:14px;
  top:50%;
  transform:translateY(-50%);
  cursor:pointer;
  font-size:18px;
  color:#666;
  transition:color 0.3s ease;
}

.password-toggle:hover{
  color:var(--neon);
}

/* Error Message */
.error-text{
  display:none;
  color:var(--accent-red);
  font-size:12px;
  margin-top:6px;
  padding:6px;
  background:rgba(255,71,87,0.1);
  border-left:3px solid var(--accent-red);
  border-radius:3px;
}

.error-text.show{
  display:block;
  animation:slideDown 0.3s ease;
}

@keyframes slideDown{
  from{
    opacity:0;
    transform:translateY(-5px);
  }
  to{
    opacity:1;
    transform:translateY(0);
  }
}

/* Buttons */
.btn{
  width:100%;
  padding:14px;
  margin-top:20px;
  border:none;
  border-radius:8px;
  background:linear-gradient(135deg,#00e5ff,#0077ff);
  color:#000;
  font-weight:bold;
  font-size:14px;
  cursor:pointer;
  transition:all 0.3s ease;
  text-transform:uppercase;
  letter-spacing:1px;
  position:relative;
  overflow:hidden;
}

.btn:hover{
  box-shadow:0 0 25px #00e5ff;
  transform:translateY(-2px);
}

.btn:active{
  transform:translateY(0);
}

.btn.loading{
  pointer-events:none;
  opacity:0.8;
}

.btn-spinner{
  display:inline-block;
  width:16px;
  height:16px;
  border:2px solid rgba(0,0,0,0.3);
  border-radius:50%;
  border-top-color:#000;
  animation:spin 0.8s linear infinite;
  margin-right:8px;
}

@keyframes spin{
  to{transform:rotate(360deg);}
}

/* Divider */
.divider{
  display:flex;
  align-items:center;
  margin:25px 0;
}

.divider-line{
  flex:1;
  height:1px;
  background:rgba(0,229,255,0.2);
}

.divider-text{
  padding:0 12px;
  font-size:12px;
  color:#666;
  text-transform:uppercase;
}

/* Toggle Links */
.toggle-section{
  margin-top:25px;
  text-align:center;
}

.toggle-link{
  display:inline-block;
  color:#aaa;
  font-size:13px;
  cursor:pointer;
  transition:color 0.3s ease;
  margin:0 8px;
}

.toggle-link:hover{
  color:var(--neon);
}

.toggle-link strong{
  color:var(--neon);
}

/* Hidden Forms */
.auth-form{
  display:none;
}

.auth-form.active{
  display:block;
  animation:fadeIn 0.3s ease;
}

@keyframes fadeIn{
  from{opacity:0;}
  to{opacity:1;}
}

/* Success Alert */
.success-alert{
  display:none;
  background:rgba(46,213,115,0.2);
  border:2px solid var(--accent-green);
  border-radius:8px;
  padding:15px;
  margin-bottom:20px;
  font-size:13px;
  color:var(--accent-green);
  text-align:center;
}

.success-alert.show{
  display:block;
  animation:slideDown 0.3s ease;
}

/* Security Code Box */
.security-box{
  background:rgba(0,229,255,0.1);
  border:2px solid var(--neon);
  border-radius:8px;
  padding:15px;
  margin:20px 0;
  text-align:center;
}

.security-code{
  font-size:28px;
  font-weight:bold;
  letter-spacing:8px;
  color:var(--accent-red);
  background:rgba(0,0,0,0.3);
  padding:12px;
  border-radius:5px;
  margin:10px 0;
  font-family:monospace;
}

.security-note{
  font-size:11px;
  color:#aaa;
  margin-top:10px;
}

/* Responsive */
@media (max-width: 480px) {
  .auth-container {
    width:95%;
    padding:25px;
  }
  
  .auth-title {
    font-size:22px;
  }
  
  input {
    padding:12px 14px;
  }
  
  .btn {
    padding:12px;
  }
}
</style>
</head>

<body>

<div class="auth-container">
  <!-- SUCCESS ALERT -->
  <div class="success-alert" id="successAlert"></div>

  <!-- LOGIN FORM -->
  <div class="auth-form active" id="loginForm">
    <div class="auth-header">
      <div class="auth-title">HUNTER LOGIN</div>
      <div class="auth-subtitle">Enter the Dungeon</div>
    </div>

    <div class="form-group">
      <label class="form-label">Email</label>
      <div class="input-wrapper">
        <input type="email" id="loginEmail" placeholder="your-email@example.com">
      </div>
      <div class="error-text" id="loginEmailError"></div>
    </div>

    <div class="form-group">
      <label class="form-label">Password</label>
      <div class="input-wrapper">
        <input type="password" id="loginPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
        <span class="password-toggle" onclick="togglePasswordVisibility('loginPassword')">üëÅÔ∏è</span>
      </div>
      <div class="error-text" id="loginPasswordError"></div>
    </div>

    <button class="btn" onclick="handleLogin()">
      <span class="btn-text">LOGIN</span>
    </button>

    <div class="divider">
      <div class="divider-line"></div>
      <div class="divider-text">New Here?</div>
      <div class="divider-line"></div>
    </div>

    <div class="toggle-section">
      <span class="toggle-link" onclick="switchForm('signupForm')">Create Account</span>
      <span style="color:#555;">‚Ä¢</span>
      <span class="toggle-link" onclick="switchForm('resetForm')">Forgot Password?</span>
    </div>
  </div>

  <!-- SIGNUP FORM -->
  <div class="auth-form" id="signupForm">
    <div class="auth-header">
      <div class="auth-title">HUNTER REGISTRATION</div>
      <div class="auth-subtitle">Awaken Your Power</div>
    </div>

    <div class="form-group">
      <label class="form-label">Hunter Name</label>
      <div class="input-wrapper">
        <input type="text" id="signupName" placeholder="Your Hunter Name">
      </div>
      <div class="error-text" id="signupNameError"></div>
    </div>

    <div class="form-group">
      <label class="form-label">Email</label>
      <div class="input-wrapper">
        <input type="email" id="signupEmail" placeholder="your-email@example.com">
      </div>
      <div class="error-text" id="signupEmailError"></div>
    </div>

    <div class="form-group">
      <label class="form-label">Password (min. 6 characters)</label>
      <div class="input-wrapper">
        <input type="password" id="signupPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
        <span class="password-toggle" onclick="togglePasswordVisibility('signupPassword')">üëÅÔ∏è</span>
      </div>
      <div class="error-text" id="signupPasswordError"></div>
    </div>

    <div class="form-group">
      <label class="form-label">Confirm Password</label>
      <div class="input-wrapper">
        <input type="password" id="signupConfirm" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
        <span class="password-toggle" onclick="togglePasswordVisibility('signupConfirm')">üëÅÔ∏è</span>
      </div>
      <div class="error-text" id="signupConfirmError"></div>
    </div>

    <div class="security-box">
      <div style="font-size:12px; color:var(--neon); text-transform:uppercase; margin-bottom:8px;">üîí Your Security Code</div>
      <div class="security-code" id="securityCodeDisplay">------</div>
      <div class="security-note">Save this code! You'll need it for account recovery.</div>
    </div>

    <button class="btn" onclick="handleSignup()">
      <span class="btn-text">CREATE ACCOUNT</span>
    </button>

    <div class="divider">
      <div class="divider-line"></div>
    </div>

    <div class="toggle-section">
      <span class="toggle-link" onclick="switchForm('loginForm')">Back to <strong>Login</strong></span>
    </div>
  </div>

  <!-- PASSWORD RESET FORM -->
  <div class="auth-form" id="resetForm">
    <div class="auth-header">
      <div class="auth-title">RESET PASSWORD</div>
      <div class="auth-subtitle">Recover Your Account</div>
    </div>

    <div class="form-group">
      <label class="form-label">Email</label>
      <div class="input-wrapper">
        <input type="email" id="resetEmail" placeholder="your-email@example.com">
      </div>
      <div class="error-text" id="resetEmailError"></div>
    </div>

    <div class="form-group">
      <label class="form-label">New Password</label>
      <div class="input-wrapper">
        <input type="password" id="resetNewPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
        <span class="password-toggle" onclick="togglePasswordVisibility('resetNewPassword')">üëÅÔ∏è</span>
      </div>
      <div class="error-text" id="resetNewPasswordError"></div>
    </div>

    <div class="form-group">
      <label class="form-label">Confirm New Password</label>
      <div class="input-wrapper">
        <input type="password" id="resetConfirmPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
        <span class="password-toggle" onclick="togglePasswordVisibility('resetConfirmPassword')">üëÅÔ∏è</span>
      </div>
      <div class="error-text" id="resetConfirmPasswordError"></div>
    </div>

    <button class="btn" onclick="handlePasswordReset()">
      <span class="btn-text">RESET PASSWORD</span>
    </button>

    <div class="divider">
      <div class="divider-line"></div>
    </div>

    <div class="toggle-section">
      <span class="toggle-link" onclick="switchForm('loginForm')">Back to <strong>Login</strong></span>
    </div>
  </div>
</div>

<script>
// ===== UTILITY FUNCTIONS =====

function switchForm(formId) {
  document.querySelectorAll('.auth-form').forEach(form => {
    form.classList.remove('active');
  });
  document.getElementById(formId).classList.add('active');
  clearAllErrors();
  document.querySelector('.success-alert').classList.remove('show');
  
  // Generate security code only when switching to signup form
  if (formId === 'signupForm') {
    const securityCodeDisplay = document.getElementById('securityCodeDisplay');
    if (securityCodeDisplay && securityCodeDisplay.textContent === '------') {
      securityCodeDisplay.textContent = generateSecurityCode();
    }
  }
}

function clearAllErrors() {
  document.querySelectorAll('.error-text').forEach(el => {
    el.textContent = '';
    el.classList.remove('show');
  });
  document.querySelectorAll('input').forEach(input => {
    input.classList.remove('error');
  });
}

function showError(inputId, errorId, message) {
  const input = document.getElementById(inputId);
  const errorEl = document.getElementById(errorId);
  input.classList.add('error');
  errorEl.textContent = message;
  errorEl.classList.add('show');
}

function hideError(inputId, errorId) {
  const input = document.getElementById(inputId);
  const errorEl = document.getElementById(errorId);
  input.classList.remove('error');
  errorEl.classList.remove('show');
}

function showSuccess(message) {
  const alert = document.querySelector('.success-alert');
  alert.textContent = message;
  alert.classList.add('show');
}

function setButtonLoading(button, isLoading) {
  if (!button) return;
  if (isLoading) {
    button.classList.add('loading');
    button.innerHTML = '<span class="btn-spinner"></span><span class="btn-text">PROCESSING...</span>';
  } else {
    button.classList.remove('loading');
    button.innerHTML = '<span class="btn-text">LOGIN</span>';
  }
}

function togglePasswordVisibility(inputId) {
  try {
    const input = document.getElementById(inputId);
    const toggle = event?.target;
    if (!input || !toggle) return;
    
    if (input.type === 'password') {
      input.type = 'text';
      toggle.textContent = 'üëÅÔ∏è‚Äçüó®Ô∏è';
    } else {
      input.type = 'password';
      toggle.textContent = 'üëÅÔ∏è';
    }
  } catch (e) {
    console.error('Password toggle error:', e);
  }
}

function validateEmail(email) {
  const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  return re.test(email);
}

function generateSecurityCode() {
  return Math.floor(100000 + Math.random() * 900000).toString();
}

// ===== LOGIN =====
async function handleLogin() {
  try {
    clearAllErrors();
    
    const email = document.getElementById('loginEmail')?.value.trim() || '';
    const password = document.getElementById('loginPassword')?.value || '';
    
    let isValid = true;
    
    if (!email) {
      showError('loginEmail', 'loginEmailError', 'Email is required');
      isValid = false;
    } else if (!validateEmail(email)) {
      showError('loginEmail', 'loginEmailError', 'Invalid email format');
      isValid = false;
    }
    
    if (!password) {
      showError('loginPassword', 'loginPasswordError', 'Password is required');
      isValid = false;
    } else if (password.length < 6) {
      showError('loginPassword', 'loginPasswordError', 'Password must be at least 6 characters');
      isValid = false;
    }
    
    if (!isValid) return;
    
    const btn = event?.target;
    if (btn) setButtonLoading(btn, true);
    
    const users = JSON.parse(localStorage.getItem('users') || '[]');
    const user = users.find(u => 
      u.email.toLowerCase().trim() === email.toLowerCase().trim() && 
      u.password.trim() === password.trim()
    );
    
    if (user) {
      const normalizedUser = {
        ...user,
        xp: user.xp || user.exp || 0,
        level: user.level || 1,
        currentExp: user.currentExp || 0,
        nextLevelExp: user.nextLevelExp || (user.level || 1) * 100,
        workoutsCompleted: user.workoutsCompleted || 0,
        hunterName: user.hunterName || user.name || 'HUNTER',
        profilePic: user.profilePic || user.profilePhoto || '',
        loginTime: Date.now(),
        lastActive: Date.now()
      };
      
      localStorage.setItem('currentUser', JSON.stringify(normalizedUser));
      showSuccess('‚úì Login successful! Redirecting...');
      setTimeout(() => {
        window.location.href = 'solo-leveling-fitness.html';
      }, 1000);
    } else {
      showError('loginPassword', 'loginPasswordError', 'Invalid email or password');
      if (btn) setButtonLoading(btn, false);
    }
  } catch (error) {
    console.error('Login error:', error);
    showError('loginPassword', 'loginPasswordError', 'Login failed. Try again.');
    const btn = event?.target;
    if (btn) setButtonLoading(btn, false);
  }
}

// ===== SIGNUP =====
async function handleSignup() {
  clearAllErrors();
  
  const name = document.getElementById('signupName').value.trim();
  const email = document.getElementById('signupEmail').value.trim();
  const password = document.getElementById('signupPassword').value.trim();
  const confirm = document.getElementById('signupConfirm').value.trim();
  
  let isValid = true;
  
  if (!name || name.length < 2) {
    showError('signupName', 'signupNameError', 'Hunter name must be at least 2 characters');
    isValid = false;
  }
  
  if (!email) {
    showError('signupEmail', 'signupEmailError', 'Email is required');
    isValid = false;
  } else if (!validateEmail(email)) {
    showError('signupEmail', 'signupEmailError', 'Invalid email format');
    isValid = false;
  }
  
  if (!password) {
    showError('signupPassword', 'signupPasswordError', 'Password is required');
    isValid = false;
  } else if (password.length < 6) {
    showError('signupPassword', 'signupPasswordError', 'Password must be at least 6 characters');
    isValid = false;
  }
  
  if (!confirm) {
    showError('signupConfirm', 'signupConfirmError', 'Please confirm your password');
    isValid = false;
  } else if (password !== confirm) {
    showError('signupConfirm', 'signupConfirmError', 'Passwords do not match');
    isValid = false;
  }
  
  if (!isValid) return;
  
  const users = JSON.parse(localStorage.getItem('users') || '[]');
  if (users.find(u => u.email.toLowerCase() === email.toLowerCase())) {
    showError('signupEmail', 'signupEmailError', 'Email already registered');
    return;
  }
  
  const btn = event?.target;
  if (btn) setButtonLoading(btn, true);
  
  try {
    // Use the security code displayed on screen (already generated)
    const securityCode = document.getElementById('securityCodeDisplay')?.textContent || generateSecurityCode();
    
    const newUser = {
      id: Date.now().toString(),
      name: name,
      hunterName: name,
      email: email,
      password: password,
      securityCode: securityCode,
      level: 1,
      xp: 0,
      exp: 0,
      currentExp: 0,
      nextLevelExp: 100,
      workoutsCompleted: 0,
      streak: 0,
      profilePic: '',
      joinDate: new Date().toISOString()
    };
    
    users.push(newUser);
    localStorage.setItem('users', JSON.stringify(users));
    localStorage.setItem('currentUser', JSON.stringify(newUser));
    
    alert(`‚úì Account created!\n\nüîí Security Code: ${securityCode}\n\nSave this code for account recovery!`);
    
    setTimeout(() => {
      window.location.href = 'solo-leveling-fitness.html';
    }, 1500);
  } catch (error) {
    showError('signupEmail', 'signupEmailError', 'Registration failed. Try again.');
    console.error('Signup error:', error);
    const btn = event?.target;
    if (btn) setButtonLoading(btn, false);
  }
}

// ===== PASSWORD RESET =====
async function handlePasswordReset() {
  clearAllErrors();
  
  const email = document.getElementById('resetEmail').value.trim();
  const newPassword = document.getElementById('resetNewPassword').value.trim();
  const confirmPassword = document.getElementById('resetConfirmPassword').value.trim();
  
  let isValid = true;
  
  if (!email) {
    showError('resetEmail', 'resetEmailError', 'Email is required');
    isValid = false;
  } else if (!validateEmail(email)) {
    showError('resetEmail', 'resetEmailError', 'Invalid email format');
    isValid = false;
  }
  
  if (!newPassword) {
    showError('resetNewPassword', 'resetNewPasswordError', 'New password is required');
    isValid = false;
  } else if (newPassword.length < 6) {
    showError('resetNewPassword', 'resetNewPasswordError', 'Password must be at least 6 characters');
    isValid = false;
  }
  
  if (!confirmPassword) {
    showError('resetConfirmPassword', 'resetConfirmPasswordError', 'Please confirm your password');
    isValid = false;
  } else if (newPassword !== confirmPassword) {
    showError('resetConfirmPassword', 'resetConfirmPasswordError', 'Passwords do not match');
    isValid = false;
  }
  
  if (!isValid) return;
  
  const btn = event.target;
  setButtonLoading(btn, true);
  
  try {
    const users = JSON.parse(localStorage.getItem('users') || '[]');
    const userIndex = users.findIndex(u => 
      u.email.toLowerCase().trim() === email.toLowerCase().trim()
    );
    
    if (userIndex === -1) {
      showError('resetEmail', 'resetEmailError', 'Email not found');
      return;
    }
    
    users[userIndex].password = newPassword;
    localStorage.setItem('users', JSON.stringify(users));
    
    showSuccess('‚úì Password reset successful! Logging in...');
    
    setTimeout(() => {
      switchForm('loginForm');
      document.getElementById('loginEmail').value = email;
      document.getElementById('loginPassword').value = newPassword;
    }, 1500);
  } catch (error) {
    showError('resetEmail', 'resetEmailError', 'Reset failed. Try again.');
    console.error('Reset error:', error);
    const btn = event?.target;
    if (btn) setButtonLoading(btn, false);
  }
}

// ===== SECURITY CODE GENERATION =====
document.addEventListener('DOMContentLoaded', function() {
  try {
    const securityCodeDisplay = document.getElementById('securityCodeDisplay');
    if (securityCodeDisplay) {
      securityCodeDisplay.textContent = generateSecurityCode();
    }
  } catch (e) {
    console.error('Security code error:', e);
  }
});

// Enter key support
document.addEventListener('keypress', function(e) {
  try {
    if (e.key === 'Enter') {
      const activeForm = document.querySelector('.auth-form.active');
      if (!activeForm) return;
      
      if (activeForm.id === 'loginForm') {
        handleLogin();
      } else if (activeForm.id === 'signupForm') {
        handleSignup();
      } else if (activeForm.id === 'resetForm') {
        handlePasswordReset();
      }
    }
  } catch (e) {
    console.error('Enter key error:', e);
  }
});

console.log('Professional Login System Ready - Solo Leveling Edition');
</script>

</body>
</html>
